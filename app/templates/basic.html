<!--

    基礎模板

    created date : 2021/10/06
    created by jay

    last update date : 2021/10/07\22
    update by : jay

-->

<!DOCTYPE html>
<html lang="en">
<head>
    {% block head %}
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-uWxY/CJNBR+1zjPWmfnSnVxwRheevXITnMqoEIeG1LJrdI0GlVs/9cVSyPYXdcSF" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-kQtW33rZJAHjgefvhyyzcGF3C5TFyBQBA13V1RKPf4uH+bwyzQxZ6CmMZHmNBEfJ" crossorigin="anonymous"></script>
    <link rel="shortcut icon" href="{{ url_for('static', filename = 'images/icon.png') }}" type="image/x-icon">
    <link rel="icon" href="{{ url_for('static', filename = 'image/icon.png') }}" type="image/x-icon">
    <link href="{{ url_for('static', filename = 'css/basic.css') }}" rel="stylesheet">
    <title>{% block title %} Daily Life {% endblock %}</title>
    {% endblock %}
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
          <a class="navbar-brand" href="/">
            <img src="{{ url_for('static', filename = 'images/nav_icon.png') }}" alt="" width="35" height="30" class="d-inline-block align-text-top">
            Daily Life
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              {% if current_user.is_authenticated %}
              <li class="nav-item">
                <a class="nav-link" href="{{ url_for('auth.change_password')}}">更改密碼</a>
              </li>
              {% if current_user.can(Permission.MODERATE) %} 
              <li class="nav-item">
                <a class="nav-link" href="{{ url_for('main.modrate') }}">
                  管理留言
                </a>
              </li>
              {% endif %}
              <li class="nav-item">
                <a class="nav-link" href="{{ url_for('main.user', username = current_user.username)}}">
                  <img src="{{ url_for('static', filename = 'images/profile.svg') }}" width="30" height="24" class="d-inline-block align-text-top">
                  個人資料
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{{ url_for('auth.logout')}}">
                  <img src="{{ url_for('static', filename = 'images/logout.svg') }}" width="30" height="24" class="d-inline-block align-text-top">
                  登出
                </a>
              </li>
              {% else %} 
              <li class="nav-item navbar-right">
                <a class="nav-link" href="{{ url_for('auth.login')}}">
                  <img src="{{ url_for('static', filename = 'images/login.svg') }}" width="30" height="24" class="d-inline-block align-text-top">
                  登入
                </a>
              </li>
              {% endif %}
            </ul>
            <form class="d-flex" action="{{ url_for('main.search') }}" method="post">
              <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
              <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" name = 'search'>
              <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
          </div>
        </div>
    </nav>

    <div class="container">
        {% for message in get_flashed_messages() %} 
            <div class="alert alert-primary" role="alert">
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                {{ message }}
            </div>
        {% endfor %} 

        {% block page_content %} 
        {% endblock %}
    </div>

    {% block script %}
      {{ moment.include_moment() }} 
      {{ moment.locale(auto_detect=True) }}
    {% endblock %}

    
</body>
</html>